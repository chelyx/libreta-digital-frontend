<mat-drawer-container class="container">
  <mat-drawer #drawer class="sidenav" mode="over">
    <mat-nav-list>
      <a mat-list-item *ngFor="let link of actions" (click)="navigateToPanel(link.panel); drawer.close()">
        <mat-icon>{{ link.icon }}</mat-icon>
        <span>{{ link.label }}</span>
      </a>
    </mat-nav-list>
  </mat-drawer>

  <mat-drawer-content class="sidenav-content">
    <mat-toolbar class="navbar">
      <button mat-icon-button (click)="drawer.toggle()">
        <mat-icon>menu</mat-icon>
      </button>
      <span class="app-title"  (click)="navigateToPanel('')">SIRCA</span>

      <!-- USUARIO LOGUEADO -->
      <div class="user-info" [matMenuTriggerFor]="userMenu" *ngIf="usuario">
        <img
          class="avatar"
         [src]="usuario.picture"
          alt="Usuario"
        />
        <span>{{ usuario.nickname }}</span>
      </div>

      <mat-menu #userMenu="matMenu">
        <!-- <button mat-menu-item (click)="navigateToPanel('perfil')">
          <mat-icon>person</mat-icon>
          <span>Mi Perfil</span>
        </button> -->

        <button mat-menu-item (click)="logout()">
          <mat-icon>logout</mat-icon>
          <span>Cerrar sesión</span>
        </button>
      </mat-menu>
    </mat-toolbar>

    <div class="home-container">
      <!-- DASHBOARD -->
      <div class="dashboard" *ngIf="currentPanel === ''">
       <mat-card class="welcome-card">
         <img  src="assets/utn-logo.png"  />

        <mat-card-content>
          <h2>Bienvenido, {{ usuario.name }}</h2>
          <p>Accedé rápidamente a tus módulos</p>
        </mat-card-content>
      </mat-card>


        <!-- MAIN CARDS -->
        <div class="cards-container" *ngIf="mainCards.length > 0">
          <div class="main-action-card" *ngFor="let card of mainCards" (click)="navigateToPanel(card.panel)">
            <mat-icon>{{ card.icon }}</mat-icon>
            <h2 class="card-title">{{ card.title }}</h2>
            <p class="card-description">{{ card.description }}</p>
            <button mat-raised-button [color]="card.color">{{ card.buttonLabel }}</button>
          </div>
        </div>

        <!-- QUICK ACTIONS - Todas las opciones del menú -->
        <div class="quick-actions-section" *ngIf="quickActions.length > 0">
          <h3 class="section-title">Acciones Rápidas</h3>

          <div class="quick-actions-flex">
            <div
              class="quick-action-card"
              *ngFor="let action of quickActions"
              (click)="navigateToPanel(action.panel)"
            >
              <mat-icon>{{ action.icon }}</mat-icon>
              <h4 class="qa-title">{{ action.label }}</h4>
            </div>
          </div>
        </div>

      </div>

      <!-- PANELS -->
      <app-code-generator *ngIf="currentPanel === PANELES.CODE_GENERATOR"></app-code-generator>
      <app-mis-materias *ngIf="currentPanel === PANELES.MATERIAS"></app-mis-materias>
      <app-toma-de-asistencia *ngIf="currentPanel === PANELES.ASISTENCIA" [cursos]="cursos"></app-toma-de-asistencia>
      <app-asistencia-table *ngIf="currentPanel === PANELES.ASISTENCIA_TABLE" [cursos]="cursos" ></app-asistencia-table>
      <app-historial-notas *ngIf="currentPanel === PANELES.HISTORIAL_NOTAS"></app-historial-notas>
      <app-examen-wizard *ngIf="currentPanel === PANELES.EXAMEN_WIZARD" [cursos]="cursos"></app-examen-wizard>
      <app-historial-asistencia *ngIf="currentPanel === PANELES.HISTORIAL_ASISTENCIA"></app-historial-asistencia>
      <app-asistencia *ngIf="currentPanel === PANELES.ASISTENCIA2" [cursos]="cursos"></app-asistencia>
      <app-buscar-final
        *ngIf="currentPanel === PANELES.BUSCAR_FINAL">
      </app-buscar-final>
    </div>
  </mat-drawer-content>
</mat-drawer-container>
